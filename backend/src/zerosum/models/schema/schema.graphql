# Following https://github.com/deltaskelta/graphql-go-pets-example

scalar Time

schema {
    query: Query
    mutation: Mutation
}

# The query type, represents all of the entry points into our object graph
type Query {
    getUser(id: ID!): User
    getGame(id: ID!): Game
    getGames(filter: String!, limit: Int, after: String): [Game]

    # Private, can only get own votes
    getVote(gameId: ID!): Vote
    getVotes(limit: Int, after: String): [Vote]
}

# The mutation type, represents all updates we can make to our data
type Mutation {

    # Private, can only mutate own stuff
    createUser(user: UserInput!): User
    updateUser(user: UserInput!): User
    deleteUser(): Boolean!

    addGame(game: GameInput!): Game

    addVote(vote: VoteInput!): Vote
}
enum GameMode {
    MAJORITY
    MINORITY
}

enum Stakes {
    NO_STAKES
    FIXED_STAKES
    FIXED_LIMIT
    NO_LIMIT
}


type VoteResult {
    win: Boolean
    netChange: Int
}

type OptionResult {
    option: Option
    voteCount: Int
    totalValue: Int
    winner: Boolean
}

# what is needed for a game
type Game {
    id: ID!
    owner: User
    topic: String
    startTime: Time
    endTime: Time
    totalMoney: Int
    gameMode: GameMode
    stakes: Stakes
    options: [Option]
    participants: [User]
    result: [OptionResult]
}

type Option {
    id: ID!
    body: String
}

# what is needed for a user
type User {
    id: ID!
    money: Int
    gamesCreated: [Game]
    gamesParticipated: [Game]
    #other deets
}

# what is needed for a vote
type Vote {
    game: Game
    option: Option
    money: Int
    result: VoteResult
}

input UserInput {
    #deets
}

input GameInput {
    topic: String!
    duration: Int!
    gameMode: GameMode!
    stakes: Stakes!
    options: [String!]!
}

input VoteInput {
    gameId: ID!
    optionId: ID!
    amount: Int!
}
